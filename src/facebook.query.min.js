!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("facebookQuery",this,function(){"use strict";var a=function(a){return a?(this.strField=a,this.bRootField=!1):this.bRootField=!0,this.aFields=[],this.iLimit=0,this};return a.prototype.getName=function(){return this.strField},a.prototype.addField=function(b){return"string"==typeof b&&(b=new a(b)),this.aFields.push(b),b},a.prototype.getField=function(a){var b=null;return this.aFields.some(function(c){return c.getName()==a?(b=c,!0):void 0}),b},a.prototype.fields=function(a){var b=this;return"undefined"==typeof a?b.aFields:(b.aFields=[],a.forEach(function(a){b.addField(a)}),b)},a.prototype.fieldNames=function(){return this.aFields.map(function(a){return a.getName()})},a.prototype.limit=function(a){return"undefined"==typeof a?this.iLimit:(this.iLimit=a,this)},a.prototype.toString=function(){var a=this;if(a.bRootField)return"fields="+a.aFields.join(",");var b=a.strField;return a.iLimit&&(b+=".limit("+a.iLimit+")"),a.aFields.length&&(b+=".fields("+a.aFields.join(",")+")"),b},a.prototype.toJSON=function(){var a={};return this.aFields.length&&(a.fields=this.aFields),this.strField&&(a.name=this.strField),this.iLimit&&(a.limit=this.iLimit),a},a.prototype.parseResponse=function(b){var c,d=this;if("string"==typeof b&&(b=JSON.parse(b)),d.mData=b.data||b,d.id=b.id,d.oPaging=b.paging,d.aDataFields=[],Array.isArray(d.mData)){var e=[];d.mData.forEach(function(b){e.push(new a(d.getName()).parseResponse(b))}),d.mData=e}else if("object"==typeof d.mData)for(c in d.mData)d.mData.hasOwnProperty(c)&&(d.aDataFields.push(c),d.mData[c].data&&(d.mData[c]=new a(c).parseResponse(d.mData[c])));return d},a.prototype.data=function(a){return a?"object"==typeof this.mData[a]&&this.mData[a].hasData()?this.mData[a].data():this.mData[a]:this.mData},a.prototype.hasData=function(){return"object"==typeof this.mData},a.prototype.dataFields=function(){return this.aDataFields},a.prototype.getID=function(){return this.id},a.prototype.paging=function(){return this.oPaging},a});